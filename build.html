<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>B√°o Gi√° Website - Cypher</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root { --accent: #00ffff; --text-light: #f5f5f5; }
    * { box-sizing: border-box; font-family: 'Poppins', sans-serif; transition: all 0.25s ease; }
    body{
      margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
      background: linear-gradient(120deg,#000,#0a0020,#001a33,#001a00);
      background-size:400% 400%; animation:gradientShift 15s linear infinite;
      color:var(--text-light);
    }
    @keyframes gradientShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .container{
      width:90%; max-width:1100px; display:flex; gap:36px; flex-wrap:wrap;
      padding:32px; border-radius:20px; background:rgba(8,8,8,0.9);
      border:1px solid rgba(0,255,255,0.08); box-shadow:0 8px 30px rgba(0,0,0,0.6);
      backdrop-filter: blur(6px);
    }
    .column{flex:1; min-width:300px; max-width:480px;}
    h1{color:var(--accent); text-align:center; margin:0 0 18px 0; text-shadow:0 0 8px rgba(0,255,255,0.12)}
    label{display:block; margin-top:10px; font-weight:500;}
    input,select{width:100%; padding:10px; border-radius:8px; background:#141414; color:#fff; border:1px solid #222; outline:none}
    input:focus,select:focus{box-shadow:0 0 8px rgba(0,255,255,0.12); border-color:var(--accent)}
    input[readonly]{background:#222; color:#ccc}
    button{width:100%; margin-top:16px; padding:12px; border-radius:10px; border:none;
      background:linear-gradient(90deg,#00ffff,#0077ff); color:#000; font-weight:600; cursor:pointer;
      box-shadow:0 6px 18px rgba(0,255,255,0.12)}
    button:hover{transform:translateY(-2px)}
    .result{margin-top:14px; padding:12px; background:rgba(255,255,255,0.03); border-radius:8px; border:1px solid rgba(255,255,255,0.04)}
    .note{margin-top:10px; padding:8px 10px; border-left:3px solid var(--accent); background:rgba(0,255,255,0.03); color:#dff;}
    .copyable{cursor:pointer; color:var(--accent); user-select:none}
    img.qr{width:200px; display:block; margin:14px auto; border-radius:8px}
    .benefits ul{list-style:"‚ú® "; padding-left:18px}
    /* --- s·ª≠a ƒë·ªÉ checkbox API c√πng h√†ng --- */
    .api-inline{display:flex; align-items:center; gap:8px; margin-top:12px;}
    .api-inline input{width:18px; height:18px; accent-color:var(--accent); cursor:pointer; margin:0}
    .api-inline label{margin:0; cursor:pointer; font-weight:500}
    @media(max-width:760px){ .container{padding:20px} h1{font-size:1.4rem} .api-inline{flex-wrap:wrap} }
  </style>
</head>
<body>
  <div class="container">
    <div class="column">
      <h1>B√ÅO GI√Å WEBSITE</h1>

      <label for="domainName">T√™n mi·ªÅn:</label>
      <input id="domainName" type="text" placeholder="Nh·∫≠p t√™n mi·ªÅn (vd: cypher234)">

      <label for="domainType">Ch·ªçn ƒëu√¥i mi·ªÅn:</label>
      <select id="domainType">
        <option value=".com" data-price="250000">.com - 250.000ƒë/nƒÉm</option>
        <option value=".vn" data-price="480000">.vn - 480.000ƒë/nƒÉm</option>
        <option value=".net" data-price="260000">.net - 260.000ƒë/nƒÉm</option>
        <option value=".shop" data-price="75000">.shop - 75.000ƒë/nƒÉm</option>
      </select>

      <!-- n√∫t ki·ªÉm tra domain -->
      <button id="checkDomainBtn" type="button">üîç Ki·ªÉm tra t√™n mi·ªÅn</button>
      <div id="checkResult" class="result" aria-live="polite" style="display:none"></div>

      <label for="hosting">G√≥i hosting:</label>
      <select id="hosting">
        <option value="8000">G√≥i 1 - 8.000ƒë/th√°ng</option>
        <option value="16000">G√≥i 2 - 16.000ƒë/th√°ng</option>
        <option value="24000">G√≥i 3 - 24.000ƒë/th√°ng</option>
        <option value="32000">G√≥i 4 - 32.000ƒë/th√°ng</option>
      </select>

      <!-- checkbox API inline c√πng h√†ng -->
      <div class="api-inline" aria-hidden="false">
        <input id="api" type="checkbox" />
        <label for="api">Th√™m API Auto Bank (35.000ƒë/th√°ng)</label>
      </div>

      <label style="margin-top:12px">Ti·ªÅn c√¥ng thi·∫øt k·∫ø (c·ªë ƒë·ªãnh):</label>
      <input id="designPrice" value="300.000ƒë" readonly>

      <button id="calcBtn" type="button">T√≠nh T·ªïng Ti·ªÅn</button>
      <div id="resultBox" class="result" aria-live="polite"></div>
      <button id="payBtn" type="button" style="display:none">Hi·ªÉn Th·ªã QR Thanh To√°n</button>
    </div>

    <div class="column">
      <h1>THANH TO√ÅN</h1>
      <p>üí¨ Sau khi ch·ªçn xong, chuy·ªÉn kho·∫£n theo h∆∞·ªõng d·∫´n:</p>
      <p>Ng√¢n h√†ng: <span class="copyable" data-text="Techcombank">Techcombank</span></p>
      <p>Ch·ªß TK: <span class="copyable" data-text="L√ä VƒÇN LINH">L√ä VƒÇN LINH</span></p>
      <p>S·ªë TK: <span class="copyable" data-text="19073015796012">19073015796012</span></p>

      <img id="qrImage" class="qr" src="" alt="QR Thanh To√°n" style="display:none">

      <div class="demo-link" style="text-align:center; margin-top:8px">
        üåê <a href="https://cypher234.shop" target="_blank" rel="noopener" style="color:var(--accent); font-weight:600; text-decoration:none">Demo Website: Cypher234.shop</a>
      </div>

      <div class="benefits" style="margin-top:12px">
        <h3 style="color:var(--accent)">üöÄ ∆Øu ƒëi·ªÉm website:</h3>
        <ul>
          <li>Login Google nhanh</li>
          <li>Auto ƒë·ªëi so√°t qua API</li>
          <li>QR thanh to√°n t·ª©c th√¨</li>
          <li>T·ªëi ∆∞u SEO + mobile friendly</li>
        </ul>
      </div>
    </div>
  </div>

  <script>
    (function () {
      const calcBtn = document.getElementById('calcBtn');
      const payBtn = document.getElementById('payBtn');
      const resultBox = document.getElementById('resultBox');
      const qrImage = document.getElementById('qrImage');
      const checkBtn = document.getElementById('checkDomainBtn');
      const checkResult = document.getElementById('checkResult');

      const copyables = Array.from(document.querySelectorAll('.copyable'));

      // copy fallback
      async function copyTextToClipboard(text) {
        try {
          if (navigator.clipboard && window.isSecureContext) {
            await navigator.clipboard.writeText(text);
            return true;
          } else {
            const ta = document.createElement('textarea');
            ta.value = text;
            ta.style.position = 'fixed';
            ta.style.left = '-9999px';
            document.body.appendChild(ta);
            ta.focus();
            ta.select();
            const ok = document.execCommand('copy');
            document.body.removeChild(ta);
            return ok;
          }
        } catch (err) {
          console.error('Copy failed', err);
          return false;
        }
      }

      copyables.forEach(el => {
        el.addEventListener('click', async () => {
          const txt = el.getAttribute('data-text') || el.textContent.trim();
          const ok = await copyTextToClipboard(txt);
          if (ok) alert('‚úÖ ƒê√£ sao ch√©p: ' + txt);
          else alert('‚ùå Kh√¥ng th·ªÉ sao ch√©p. Vui l√≤ng copy th·ªß c√¥ng: ' + txt);
        });
      });

      // -- Ki·ªÉm tra t√™n mi·ªÅn (theo form m·∫´u)
      checkBtn.addEventListener('click', async () => {
        const nameEl = document.getElementById('domainName');
        const name = nameEl.value.trim();
        const type = document.getElementById('domainType').value; // .com, .vn, ...
        if (!name) { alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p t√™n mi·ªÅn c·∫ßn ki·ªÉm tra!'); nameEl && nameEl.focus(); return; }

        const fullDomain = name + type;
        checkResult.style.display = 'block';
        checkResult.style.color = ''; checkResult.innerHTML = '‚è≥ ƒêang ki·ªÉm tra...';

        try {
          // DomainsDB h·ªó tr·ª£ zone param: zone= com | vn | net | shop (kh√¥ng c√≥ dot)
          const zone = type.replace('.', '');
          const apiUrl = `https://api.domainsdb.info/v1/domains/search?domain=${encodeURIComponent(name)}&zone=${encodeURIComponent(zone)}`;
          const res = await fetch(apiUrl);
          const data = await res.json();

          // N·∫øu api tr·∫£ v·ªÅ "domains" m√† c√≥ item v·ªõi domain === fullDomain => ƒë√£ ƒëƒÉng k√Ω
          let registered = false;
          if (data && Array.isArray(data.domains) && data.domains.length > 0) {
            for (const d of data.domains) {
              if (d.domain && d.domain.toLowerCase() === fullDomain.toLowerCase()) { registered = true; break; }
            }
          }

          if (registered) {
            checkResult.innerHTML = `‚ùå <strong>${fullDomain}</strong> ƒë√£ ƒë∆∞·ª£c ƒëƒÉng k√Ω.`;
            checkResult.style.color = '#ff8080';
          } else {
            checkResult.innerHTML = `‚úÖ <strong>${fullDomain}</strong> c√≥ th·ªÉ ƒëƒÉng k√Ω!`;
            checkResult.style.color = '#80ff80';
          }
        } catch (err) {
          console.error('Domain check error', err);
          checkResult.innerHTML = '‚ö†Ô∏è Kh√¥ng th·ªÉ ki·ªÉm tra (l·ªói API ho·∫∑c m·∫°ng).';
          checkResult.style.color = '#ffd080';
        }
      });

      // -- T√≠nh ti·ªÅn (gi·ªØ form m·∫´u)
      calcBtn.addEventListener('click', () => {
        try {
          const nameEl = document.getElementById('domainName');
          const domainType = document.getElementById('domainType');
          const hosting = document.getElementById('hosting');
          const apiChk = document.getElementById('api');

          const name = nameEl ? nameEl.value.trim() : '';
          if (!name) { alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p t√™n mi·ªÅn!'); nameEl && nameEl.focus(); return; }

          const domainPrice = Number(domainType.selectedOptions[0].dataset.price || 0);
          const hostPrice = Number(hosting.value || 0);
          const apiPrice = apiChk.checked ? 35000 : 0;
          const designPrice = 300000;
          const total = designPrice + domainPrice + hostPrice + apiPrice;
          const fullDomain = name + (domainType.value || '');
          const monthly = hostPrice + apiPrice;

          resultBox.innerHTML = `
            <p><strong>T√™n mi·ªÅn:</strong> ${escapeHtml(fullDomain)}</p>
            <p><strong>T·ªïng ti·ªÅn th√°ng ƒë·∫ßu:</strong> ${numberWithCommas(total)}ƒë</p>
            <p>${apiChk.checked ? '‚úî C√≥ s·ª≠ d·ª•ng API Auto Bank' : '‚úñ Kh√¥ng s·ª≠ d·ª•ng API Auto Bank'}</p>
            <div class="note">
              üí° <strong>Ghi ch√∫:</strong> T·ª´ th√°ng th·ª© 2 tr·ªü ƒëi ch·ªâ c·∫ßn thanh to√°n <strong>${numberWithCommas(monthly)}ƒë/th√°ng</strong>
              (${numberWithCommas(hostPrice)}ƒë hosting${apiChk.checked ? ' + 35.000ƒë API' : ''}).<br>
              Ph√≠ t√™n mi·ªÅn & thi·∫øt k·∫ø ch·ªâ t√≠nh ·ªü th√°ng ƒë·∫ßu.
            </div>
          `;
          payBtn.style.display = 'block';

          // l∆∞u state ƒë·ªÉ QR d√πng
          payBtn.dataset.amount = total;
          payBtn.dataset.fulldomain = fullDomain;
        } catch (err) {
          console.error('T√≠nh ti·ªÅn l·ªói:', err);
          alert('C√≥ l·ªói x·∫£y ra khi t√≠nh ti·ªÅn. M·ªü Console (F12) ƒë·ªÉ xem chi ti·∫øt.');
        }
      });

      // -- Hi·ªÉn th·ªã QR (n·ªôi dung = t√™n mi·ªÅn ƒë·∫ßy ƒë·ªß, kh√¥ng c√≥ "ThanhToan")
      payBtn.addEventListener('click', () => {
        try {
          const amount = payBtn.dataset.amount;
          const fullDomain = payBtn.dataset.fulldomain;
          if (!amount || !fullDomain) { alert('‚ö†Ô∏è Vui l√≤ng t√≠nh ti·ªÅn tr∆∞·ªõc khi hi·ªÉn th·ªã QR.'); return; }

          // VietQR: d√πng account Techcombank - s·ªë t√†i kho·∫£n b·∫°n ƒë√£ d√πng tr∆∞·ªõc
          const encodedDomain = encodeURIComponent(fullDomain);
          const qrUrl = `https://img.vietqr.io/image/Techcombank-19073015796012-compact2.png?amount=${amount}&addInfo=${encodedDomain}`;

          qrImage.src = qrUrl;
          qrImage.alt = 'QR Thanh To√°n cho ' + fullDomain;
          qrImage.style.display = 'block';
          // scroll to QR nh·∫π
          setTimeout(()=> qrImage.scrollIntoView({behavior:'smooth'}), 120);
        } catch (err) {
          console.error('QR gen error', err);
          alert('Kh√¥ng th·ªÉ t·∫°o QR. Xem Console ƒë·ªÉ bi·∫øt l·ªói.');
        }
      });

      // helpers
      function numberWithCommas(x){ return String(x).replace(/\B(?=(\d{3})+(?!\d))/g, ","); }
      function escapeHtml(s){ return String(s).replace(/[&<>"']/g, function(t){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[t]) }); }

      console.log('Invoice page ready (form g·ªëc + t√≠nh nƒÉng domain check + QR domain-only).');
    })();
  </script>
</body>
</html>
